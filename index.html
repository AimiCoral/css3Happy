<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no">
	<title>妈咪生日快乐</title>
	<link rel="stylesheet" href="fonts/iconfont.css">
	<link rel="stylesheet" href="css/swiper.min.css">
	<link rel="stylesheet" href="css/animate.min.css">
	<link rel="stylesheet" href="css/style.css">
	<style>
		html, body {
	      position: relative;
	      height: 100%;
	    }
	    body {
	      background: #eee;
	      font-family: Helvetica Neue, Helvetica, Arial, sans-serif;
	      font-size: 14px;
	      color:#000;
	      margin: 0;
	      padding: 0;
	    }
	    .swiper-container {
	      width: 100%;
	      height: 100%;
	    }
	    .swiper-slide {
	      font-size: 18px;
	      background:#fff;
		  position:relative;
	      /* Center slide text vertically */
	     /* display: -webkit-box;
	      display: -ms-flexbox;
	      display: -webkit-flex;
	      display: flex;
	      -webkit-box-pack: center;
	      -ms-flex-pack: center;
	      -webkit-justify-content: center;
	      justify-content: center;
	      -webkit-box-align: center;
	      -ms-flex-align: center;
	      -webkit-align-items: center;
	      align-items: center;*/
	    }
	    .nextPage{
	    	width:2rem;
	    	height:2rem;
	    	/*background:rgba(0,0,0,0.3);*/
	    	border-radius: 50%;
	    	position: absolute;
	    	bottom:1rem;
	    	left:50%;
	    	margin-left: -1rem;
	    	z-index:999;
	    	font-size: 20px;
	    	line-height: 2.5rem;
	    	text-align: center;
	    	animation-iteration-count:infinite;
	    }
	    
	    .slide1{
			background:url(images/timg1.jpg) no-repeat;
			background-size:100% 100%;
		}
	    .slide2{
	    	width: 100%;
	    	height: 100%;
	    	background:url(images/timg21.png) no-repeat;
			background-size:100% auto;
	    	/*background: #fff;*/
	    	position:absolute;
	    	top:0;
	    	left:0;
		}
		.slide2 .backg{
			width: 70%;
			height:auto;
			position: absolute;
			bottom:3%;
			right:0;
		}
		.swiper-slide:nth-of-type(3){
			background:linear-gradient(#19B3E9, #fff);
		}
		.slide3{
			width: 100%;
			height:100%;
			position: absolute;
			top:0px;
			left:0px;
			background:url(images/timg3.png) no-repeat;
			background-size:100% auto;
		}
	    .Nightext{
	    	width: 100%;
	    	height: auto;
	    	position: absolute;
	    	left:10px;
	    	z-index: 2;
	    }
	    .Nightext1{
			top:33%;
	    }
	    .Nightext2{
			top:49%;
	    }
	    .Nightext3{
			top:55%;
	    }
	    .lx1{
	    	width:100%;
			height: auto;
	    	position: absolute;
	    	top:38%;
	    	left:0px;
	    }
	    .lx2{
	    	width:100%;
			height: auto;
	    	position: absolute;
	    	top:43%;
	    	left:0px;
	    }
	    .lx3{
	    	width:100%;
			height: auto;
	    	position: absolute;
	    	top:48%;
	    	left:0px;
	    }
	    .homeBox {
	    	width:180px;
	    	height:180px;
	    	transform: rotate(45deg);
			-o-transform: rotate(45deg);
			-webkit-transform: rotate(45deg);
			-moz-transform: rotate(45deg);
			margin:130px auto 0;
			/*position: relative;*/
			overflow: hidden;
	    }
	    .homeBox .Box{
	    	width:60px;
	    	height:60px;
	    	background: red;
	    	float: left;
	    	margin-bottom:60px;
	    	margin-right:60px;
	    	transform: rotate(-45deg);
			-o-transform: rotate(-45deg);
			-webkit-transform: rotate(-45deg);
			-moz-transform: rotate(-45deg);
			text-align: center;
			line-height: 80px;
			overflow: hidden;
	    	/*position: absolute;*/
	    	border-radius: 50%;
	    }
	    .homeBox .Box img{
	    	width: 100%;
	    	height: auto;
	    }
	    .homeBox .Box:nth-of-type(2n){
	    	margin-right:0px;
	    }
	    .homeBox .mBox{
	    	animation: homeRotate1 8s infinite;
	    }
	    .homeBox .fBox{
	    	animation: homeRotate2 8s infinite;
	    }
	    .homeBox .wbox{
	    	animation: homeRotate3 8s infinite;
	    }
	    .homeBox .dBox{
	    	animation: homeRotate4 8s infinite;
	    }
	    @keyframes homeRotate1 {
		    25%{
		    	transform:translate(120px,0) rotate(-45deg) scale(0.8);
		    	-webkit-transform:translate(120px,0) rotate(-45deg) scale(0.8);
		    }
		    50%{
		    	transform:translate(120px,120px) rotate(-45deg);
		    	-webkit-transform:translate(120px,120px) rotate(-45deg);
		    }
		    75%{
		    	transform:translate(0,120px) rotate(-45deg) scale(0.8);
		    	-webkit-transform:translate(0,120px) rotate(-45deg) scale(0.8);
		    }
		    100%{
		    	transform:translate(0,0) rotate(-45deg);
		    	-webkit-transform:translate(0,0) rotate(-45deg);
		    }
		}
		@keyframes homeRotate2 {
		    25%{
		    	transform:translate(0,120px) rotate(-45deg) scale(0.8);
		    	-webkit-transform:translate(0,120px) rotate(-45deg) scale(0.8);
		    }
		    50%{
		    	transform:translate(-120px,120px) rotate(-45deg);
		    	-webkit-transform:translate(-120px,120px) rotate(-45deg);
		    }
		    75%{
		    	transform:translate(-120px,0) rotate(-45deg) scale(0.8);
		    	-webkit-transform:translate(-120px,0) rotate(-45deg) scale(0.8);
		    }
		    100%{
		    	transform:translate(0,0) rotate(-45deg);
		    	-webkit-transform:translate(0,0) rotate(-45deg);
		    }
		}
		@keyframes homeRotate3 {
		    25%{
		    	transform:translate(0,-120px) rotate(-45deg) scale(0.8);
		    	-webkit-transform:translate(0,-120px) rotate(-45deg) scale(0.8);
		    }
		    50%{
		    	transform:translate(120px,-120px) rotate(-45deg);
		    	-webkit-transform:translate(120px,-120px) rotate(-45deg);
		    }
		    75%{
		    	transform:translate(120px,0) rotate(-45deg) scale(0.8);
		    	-webkit-transform:translate(120px,0) rotate(-45deg) scale(0.8);
		    }
		    100%{
		    	transform:translate(0,0) rotate(-45deg);
		    	-webkit-transform:translate(0,0) rotate(-45deg);
		    }
		}
		@keyframes homeRotate4 {
		    25%{
		    	transform:translate(-120px,0) rotate(-45deg) scale(0.8);
		    	-webkit-transform:translate(-120px,0) rotate(-45deg) scale(0.8);
		    }
		    50%{
		    	transform:translate(-120px,-120px) rotate(-45deg);
		    	-webkit-transform:translate(-120px,-120px) rotate(-45deg);
		    }
		    75%{
		    	transform:translate(0,-120px) rotate(-45deg) scale(0.8);
		    	-webkit-transform:translate(0,-120px) rotate(-45deg) scale(0.8);
		    }
		    100%{
		    	transform:translate(0,0) rotate(-45deg);
		    	-webkit-transform:translate(0,0) rotate(-45deg);
		    }
		}
		.redenvel_main{
			width:100%;
			height: 100%;
			background: url(images/bj2.png) no-repeat;
			background-size:100% auto;
			position: relative;
			overflow: hidden;
		}
		.redenvel_item{
			position: absolute;
			top:-20px;
		}
		.redenvel_item img{
			width: 100%;
			height: auto;
		}
		.ceshi{
			width:143px;
			height:143px;

		}
		.ceshi .iconfont{
			font-size: 143px;
		}
		.icon-dangaosolid{
			color: #ED87AC;
		}
		.icon-dangao{
			color: #EA2E48;
		}
		.icon-icon-test{
			color: #D1B68A;
		}
		.count{
			width:100px;
			height: 100px;
			font-size: 50px;
			position: absolute;
			right:10px;
			top:10px; 
		}
		.pinkBack{
			/*background: #FC9DCE;*/
			background: -webkit-linear-gradient(#FC9DCE, #fff); /* Safari 5.1 - 6.0 */
		    background: -o-linear-gradient(#FC9DCE, #fff); /* Opera 11.1 - 12.0 */
		    background: -moz-linear-gradient(#FC9DCE, #fff); /* Firefox 3.6 - 15 */
		    background: linear-gradient(#FC9DCE, #fff); /* 标准的语法（必须放在最后） */
		    position: relative;
		}
		.redenvel_title{
			width: 80%;
			position: absolute;
			top:35%;
			margin-left:10%;
		}
		.redenvel_title img{
			width: 100%;
			height: auto;
		}
		.redenvel_count{
			width: 50px;
			text-align: center;
			font-size: 50px;
			position: absolute;
			top:50%;
			left:50%;
			color: #fff;
			margin-left: -25px;
			animation-iteration-count:infinite;
		}
		.diyPrompt,.LuckyPrompt{
			width: 100%;
			height: 100%;
			position: absolute;
			top:0;
			left:0;
			background:rgba(0,0,0,0.5);
			z-index: 999;
			display: none;
		}
		.prompt_main{
			width: 80%;
			height: 110px;
			background: #fff;
			border-radius: 3px;
			position: absolute;
			top:50%;
			margin-top: -55px;
			margin-left: 10%;
			font-size: 14px;
		}
		.prompt_main .close{
			position: absolute;
			top:5px;
			right:10px;
			font-size: 18px;
		}
		.prompt_main_title{
			width: 100%;
			height: 30px;
			line-height: 30px;
			border-bottom: 1px solid #ddd;
			padding:0 10px;
			font-weight:600;
			color: #666060;
			box-sizing: border-box;
		}
		.prompt_main_cont{
			width: 100%;
			height:80px;
			line-height:30px;
			padding:10px;
			box-sizing: border-box;
		}
		.rightFont{
			width:50px;
			height:50px;
			background: url(images/fd1.png) no-repeat;
			background-size: auto 100%;
			position: absolute;
			right:0;
			bottom:0; 
		}
		.Luckynum{
			width: 230px;
			text-align: center;
			position: absolute;
			font-size:20px;
			top:45%;
			left:50%;
			color: #fff;
			margin-left: -115px;
			display: none;
		}
		.Luckylook{
			width:100px;
			height:100px;
			background: url(images/fd1.png) no-repeat;
			background-size: auto 100%;
			position: absolute;
			top:50%;
			left:50%;
			margin-left: -50px;
			display: none;
			animation-iteration-count:infinite;
			z-index: 90;
		}
		.Lucky_title{
			width: 100%;
			height:40px;
			line-height:40px;
			font-size: 16px;
			text-align: center;
			letter-spacing: 0.2em;
			font-weight: 600;
			color: #F05550;
			border:none!important;
		}
		.Lucky_title .close{
			position: absolute;
			top:5px;
			right:10px;
			font-size: 18px;
		}
		.Luckylist{
			width:90%;
			max-height:80%;
			background: #fff;
			border-radius: 3px;
			padding:10px;
			list-style:none;
			font-size: 14px;
			position: absolute;
			top:50%;
			margin-top:0px;
			margin-bottom: 0px;
			margin-left:5%;
			box-sizing: border-box;
			overflow-y:auto;
		}
		.Luckylist li{
			list-style: none;
			padding-bottom: 5px;
			margin-bottom: 5px;
			border-bottom: 1px solid #f2f2f2;
		}
		.Luckylist li:last-of-type{
			margin-bottom: 0px;
			border-bottom:none;
		}
		.LuckyImg{
			display: inline-block;
			width: 50px;
			height: 50px;
			border-radius: 50%;
			overflow: hidden;
			vertical-align: middle;
		}
		.LuckyImg img{
			width:100%;
			height: auto;
		}
		.Luckytext{
			display: inline-block;
			width: calc(100% - 60px);
			vertical-align: middle;
		}
		.goAgainbtn{
			width: 120px;
			height: 30px;
			line-height: 30px;
			text-align: center;
			background: #F05550;
			color: #fff;
			font-size: 14px;
			border-radius: 3px;
			position: absolute;
			bottom: 10px;
			left:10px;
		}
		.dt1{
			width: 100%;
			height: auto;
			position: absolute;
			bottom:30%;
			right:0;
		}
	</style>
</head>
<body>
	<div class="swiper-container">
	    <div class="swiper-wrapper">
	      	<div class="swiper-slide slide1">
	      		<!-- <img class="Nightext1 Nightext ani" swiper-animate-effect="fadeInDown" swiper-animate-duration="0.3s" swiper-animate-delay="0.3s" src="images/night1.png" alt=""> -->
	      		<img class="Nightext2 Nightext ani" swiper-animate-effect="fadeInLeft" swiper-animate-duration="0.3s" swiper-animate-delay="0.5s" src="images/night2.png" alt="">
	      		<img class="Nightext3 Nightext ani" swiper-animate-effect="fadeInUp" swiper-animate-duration="0.3s" swiper-animate-delay="0.8s" src="images/night3.png" alt="">
	      	</div>
	      	<div class="swiper-slide ">
	      		<div class="slide2">
	      			<!-- 348CE3 -->
	      			<img class="lx1 ani" src="images/lx1.png" swiper-animate-effect="fadeInDown" swiper-animate-duration="0.3s" swiper-animate-delay="0.1s" alt="">
	      			<img class="lx2 ani" src="images/lx2.png" swiper-animate-effect="fadeInDown" swiper-animate-duration="0.3s" swiper-animate-delay="0.4s" alt="">
	      			<img class="lx3 ani" src="images/lx3.png" swiper-animate-effect="fadeInDown" swiper-animate-duration="0.3s" swiper-animate-delay="0.7s" alt="">
		      		<img class="backg" src="images/timg22.png" alt="">
		      		<!-- <div class="homeBox">
		      			<div class="Box mBox">
		      				<img src="images/mm.jpg" alt="">
		      			</div>
			      		<div class="Box fBox">
			      			<img src="images/bb.jpg" alt="">
			      		</div>
			      		<div class="Box wbox">
			      			<img src="images/jj.jpg" alt="">
			      		</div>
			      		<div class="Box dBox">
			      			<img src="images/dd.jpg" alt="">
			      		</div>
		      		</div> -->
	      		</div>
	      	</div>
	      	<div class="swiper-slide">
	      		<div class="slide3">
	      			<img class="dt1" src="images/dt1.png" alt="">
	      			我们都长大了，不能陪在你的身边，你要照顾好自己，天冷了出门要多穿点。不用担心我们。
	      		</div>
	      	 	
	      	</div>
	        <div class="swiper-slide doorSlide">
		      	<div class="RoomBox">
					<img class="blueballoon" src="images/blueballoon.png" alt="">
					<img class="redballoon" src="images/redballoon.png" alt="">
					<!-- <img class="GiftBox ani" swiper-animate-effect="bounceInDown" swiper-animate-duration="1s" swiper-animate-delay="0.2s" src="images/giftbox.png" alt=""> -->
					<!-- <div class="openGift ani" swiper-animate-effect="pulse" swiper-animate-duration="1s" swiper-animate-delay="1.7s">点击打开礼盒</div> -->
					<div class="Blessings">
						<div class="happy animated slideInLeft"></div>
						<!-- <div class="evryDay animated slideInRight">愿我妈咪心情可以如彩虹般美丽，身体棒棒哒。</div>
						<div class="name animated slideInRight">--爱你的晓</div> -->
					</div>

				</div>
	        </div>
	        <div class="swiper-slide pinkBack">
	        	<div class="redenvel_title  ani" swiper-animate-effect="flipInX" swiper-animate-duration="0.5s">
	        		<img src="images/szf2.png" alt="">
	        	</div>
	        	<div class="Luckynum">共收到 0 个福包</div>
	        	<div class="Luckylook animated pulse"></div>
	      	 	<div class="redenvel_main"></div>
				<div class="diyPrompt">
					<div class="prompt_main">
						<div class="prompt_main_title">消息提示</div>
						<div class="close">×</div>
						<div class="prompt_main_cont">生日快乐，身体健康。永远18岁</div>
						<div class="rightFont"></div>
						<div class="goAgainbtn">再来一次</div>
					</div>
				</div>
				<div class="LuckyPrompt">
					<ul class="Luckylist">
						<li class="Lucky_title">福气多多<div class="close">×</div></li>
						<li>
							<div class="LuckyImg"><img src="images/w.jpg" alt=""></div>
							<div class="Luckytext">生日快乐，身体健康。永远18岁</div>
						</li>
					</ul>
				</div>
	      	</div>
	    </div>
	    <!-- <div class="nextPage animated bounce">︾</div> -->
	</div>
	<script src="js/jquery-3.3.1.min.js"></script>
	<script src="js/swiper.min.js"></script>
	<script src="js/swiper.animate1.0.3.min.js"></script>
	<script src="js/index.js"></script>
	<script>
		 var rW = $(".redenvel_main").width(),
    	rH = $(".redenvel_main").height();
	    //飘落物体的可能性
	    var fd1 = '<img class="fdImg" src="images/fd1.png" alt="">';
	    // var fd2 = '<img class="fdImg" src="images/fd2.png" alt="">';
	    // var dg1 = '<img src="images/dg1.png" alt="">';
	    var dg2 = '<img src="images/dg2.png" alt="">';
	    var dg3 = '<img src="images/dg3.png" alt="">';
	    var dg4 = '<img src="images/dg4.png" alt="">';
	    var arr=[fd1,dg2,dg3,dg4];
	   	var basePadding = 15;
	   	var num =0;
	   	var count=3;
	   	var fourSetInter;
	   	var countSetInter;
	   	var Luckynum;
	   	var zoomsetTime,
	   		foursetTime;
	   	function LuckyInit(){
	   		Luckynum=0;
      		count = 3;
      		$(".redenvel_count").text(count);
      		$(".Luckynum").text("共收到 "+Luckynum+" 个福包");
      		$(".diyPrompt").css("display",'none');
      		$(".Luckynum").css("display","none");
      		$(".Luckylook").css("display","none");
      		var countHtml ='<div class="redenvel_count animated pulse">'+count+'</div>';
      		$(".pinkBack").append(countHtml);
      		$(".swiper-wrapper .swiper-slide").eq(3).find(".redenvel_main").empty();
      		countSetInter = setInterval(function(){
      			count--;
      			$(".redenvel_count").text(count);
      			if(count<0){
      				clearInterval(countSetInter);
      				$(".redenvel_count").remove();
      				$(".Luckynum").css("display","block");
      			}
      		},1000)
      		num=0;
      		foursetTime = setTimeout(function(){
      			fourSetInter = setInterval(function(){
			    	addObj();
			    },700)
      		},3000)
		    zoomsetTime = setTimeout(function(){
		    	clearInterval(fourSetInter);
		    	$(".redenvel_main").empty();
		    	$(".diyPrompt").css("display",'block').find(".prompt_main_cont").text("这一波祝福结束，快来看看都收到了什么祝福吧");
		    	$(".diyPrompt .goAgainbtn").css("display",'none');
		    	setTimeout(function(){
    				$(".diyPrompt").css("display",'none');
    				$(".Luckylook").css("display",'block');
    			},1000)
      		},30000)
	   	}
		var swiper = new Swiper('.swiper-container', {
	        direction: 'vertical',
	        slidesPerView: 1,
	        mousewheel: true,
	        on: {//注册事件
			    slideChange: function () {
			      	console.log(this.activeIndex);
			      	if(this.activeIndex=="4"){
			      		LuckyInit();
			      	}else{
			      		clearInterval(fourSetInter);
			      		clearInterval(countSetInter);
			      		clearTimeout(foursetTime);
			      		clearTimeout(zoomsetTime);
			      		if(this.activeIndex=="3"){
			      			$(".RoomBox").find(".GiftBox").remove();
			      			$(".RoomBox").find(".openGift").remove();
			      			$(".Blessings").css("display","none");
			      			$(".RoomBox").find(".careBox").remove();
			      			var GiftBox = '<img class="GiftBox animated bounceInDown" src="images/giftbox.png" alt="">'
							$(".RoomBox").append(GiftBox);
				      	}
			      	}//else 不等于最后slide
			    },
			    init: function(){
			        swiperAnimateCache(this); //隐藏动画元素 
			        swiperAnimate(this); //初始化完成开始动画
			    }, 
			    slideChangeTransitionEnd: function(){ 
			        swiperAnimate(this); //每个slide切换结束时也运行当前slide动画
			        //this.slides.eq(this.activeIndex).find('.ani').removeClass('ani'); 动画只展现一次，去除ani类名
			    } 
			},
	    });
	    $(".nextPage").click(function(){
	    	swiper.slideNext();
	    })
	    
	     //1.获取容器的宽高
   
    //生成mix-max的随机数
	function getRandom(min, max) {
	  return Math.round(Math.random() * (max - min) + min);
	}

	//红包的移动
	function redPackageBoxSpeed($el, time) {
	  $el.animate(
	    {
	      top: '110%',
	    },
	    time * 1000,
	    function() {
	      $el.remove();
	    }
	  );
	};

    function addObj(){
    	num++;
    	var itemW = parseInt(Math.random() + 45);
    	var maxLeftPx = rW - itemW - basePadding * 2;
    	// var itemLeft = parseInt(Math.random() * (win - 0) + 0);
    	var rot = (parseInt(Math.random() * (45 - (-45)) - 45)) + "deg";
    	var time = parseInt(Math.random() * 8 + 6);
    	var Item ='<div class="redenvel_item item'+num+'">'+arr[Math.floor(Math.random() * arr.length)]+'</div>';
    	$(".redenvel_main").append(Item);
    	$('.item'+num+' .iconfont').css({
    		"fontSize":itemW+ 'px'
    	})
    	// console.log(getRandom(basePadding, maxLeftPx))
    	$('.item'+num+'').css({
    		"left":getRandom(basePadding, maxLeftPx) + 'px',
    		"width":itemW,
    		"transform": "rotate(" + rot + ")",
			"-webkit-transform": "rotate(" + rot + ")",
			"-ms-transform": "rotate(" + rot + ")", /* Internet Explorer */
			"-moz-transform": "rotate(" + rot + ")", /* Firefox */
			"-webkit-transform": "rotate(" + rot + ")",/* Safari 和 Chrome */
			"-o-transform": "rotate(" + rot + ")" /* Opera */
    	})
    	redPackageBoxSpeed($('.item'+num+''),time)

    }

    $(".redenvel_main").on("click",".redenvel_item",function(e){
    	e.preventDefault(); 
    	console.log($(this).find(".fdImg"))
    	if($(this).find(".fdImg").length>0){
    		if($(this).find(".fdImg").attr("data-active")){
    			return;
    		}else{
    			$(this).find(".fdImg").attr("data-active",true);
    			Luckynum++;
    		}
    	}else{
    		return;
    	}
    	$(".Luckynum").text("共收到 "+Luckynum+" 个福包")
    })
    $(".Luckylook").click(function(){
    	console.log("dianji")
    	if(Luckynum==0){
    		$(".diyPrompt").css("display",'block').find(".prompt_main_cont").text("怎么没有福包呢，你没有去点福包吧。");
    		$(".diyPrompt .goAgainbtn").css("display",'block');
    	}else{
    		$(".LuckyPrompt").css({"display":"block"});
		   	var lH=$(".Luckylist").height();
		   	$(".Luckylist").css({"margin-top":-(lH/2)});
    	}
    })
    $(".diyPrompt .close").click(function(){
    	$(".diyPrompt").css("display",'none');
    })
    $(".LuckyPrompt .close").click(function(){
    	$(".LuckyPrompt").css("display",'none');
    })
    $(".goAgainbtn").click(function(){
    	LuckyInit();
    })
	</script>
</body>
</html>